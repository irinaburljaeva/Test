<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>–û—Ü–µ–Ω–∫–∞ —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç–∏ –∫ –æ—Ç—ë–∫–∞–º</title>
  <!-- Canvas Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <style>
    * { box-sizing: border-box; margin:0; padding:0 }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f4f8;
      color: #333;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    .container {
      width:100%; max-width:400px;
      background:#fff;
      border-radius:8px;
      overflow:hidden;
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
    }
    h1 {
      margin:0;
      background:#CF2C02;
      color:#fff;
      text-align:center;
      padding:1rem;
      font-size:1.25rem;
    }
    /* welcome */
    #welcome {
      text-align:center;
      padding:2rem;
    }
    #welcome h2 {
      font-size:1rem;
      margin-bottom:1.5rem;
    }
    /* quiz */
    .progress { height:6px; background:#ddd; }
    .progress-bar {
      width:0; height:100%;
      background:#CF2C02;
      transition:width .3s ease;
    }
    #slide {
      padding:2rem;
      text-align:center;
    }
    #slide h2 {
      margin-bottom:1.5rem;
      font-size:1rem;
    }
    .options label {
      display:block;
      margin:.5rem 0;
      cursor:pointer;
      text-align:left;
    }
    .options input { margin-right:.5rem }
    .fields {
      display:flex;
      gap:1rem;
      justify-content:center;
      margin-bottom:1rem;
    }
    .fields input {
      flex:1;
      padding:.5rem;
      border:1px solid #ccc;
      border-radius:4px;
      text-align:center;
    }
    #bmiValue {
      margin-bottom:1rem;
      font-weight:bold;
    }
    button {
      display:block;
      width:100%;
      padding:.75rem;
      font-size:1rem;
      background:#CF2C02;
      color:#fff;
      border:none;
      border-radius:4px;
      cursor:pointer;
      transition:background .2s;
    }
    button:disabled {
      background:#f5a46b;
      cursor:not-allowed;
    }
    /* result */
    .result img {
      max-width:100%;
      border-radius:8px;
      margin-bottom:1rem;
    }
    .result h2 { margin-bottom:1rem }
    .result p { margin-bottom:1rem; line-height:1.4 }
    .result ul {
      list-style:none;
      padding:0;
      text-align:left;
      margin:1rem 0;
    }
    .result ul li { margin-bottom:.5rem }
    .btn-link {
      display:inline-block;
      margin-top:1rem;
      padding:.5rem 1rem;
      background:#007bff;
      color:#fff;
      text-decoration:none;
      border-radius:4px;
    }
    .heart {
      position:absolute;
      font-size:2rem;
      opacity:.8;
      animation:floatUp 3s ease-out forwards;
      pointer-events:none;
    }
    @keyframes floatUp {
      0%   { transform:translateY(0) scale(1); opacity:1; }
      100% { transform:translateY(-100px) scale(1.5); opacity:0; }
    }
    @keyframes pop {
      0%,100% { transform:scale(1); }
      50%     { transform:scale(1.02); }
    }
    .pop { animation:pop .2s ease; }
  </style>
</head>
<body>
  <!-- –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω -->
  <div id="welcome" class="container">
    <h2>–£–∑–Ω–∞—Ç—å, –µ—Å—Ç—å –ª–∏ —É –º–µ–Ω—è —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ –æ—Ç—ë–∫–∞–º?</h2>
    <button id="startBtn">–ù–∞—á–∞—Ç—å</button>
  </div>

  <!-- —Å–µ–∫—Ü–∏—è —Ç–µ—Å—Ç–∞ -->
  <div id="quizSection" class="container" style="display:none;">
    <h1>–û—Ü–µ–Ω–∫–∞ —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç–∏ –∫ –æ—Ç—ë–∫–∞–º</h1>
    <div class="progress">
      <div id="progressBar" class="progress-bar"></div>
    </div>
    <div id="slide"></div>
  </div>

  <script>
    const slides = [
      { type:'radio', name:'age', question:'1. –í–æ–∑—Ä–∞—Å—Ç', options:[
        {text:'–î–æ 25 –ª–µ—Ç',value:0},
        {text:'26‚Äì35 –ª–µ—Ç',value:1},
        {text:'36‚Äì45 –ª–µ—Ç',value:2},
        {text:'–°—Ç–∞—Ä—à–µ 45 –ª–µ—Ç',value:3}
      ]},
      { type:'bmi', question:'2. –í–µ—Å (–∫–≥) –∏ —Ä–æ—Å—Ç (—Å–º):' },
      { type:'radio', name:'life', question:'3. –û–±—Ä–∞–∑ –∂–∏–∑–Ω–∏', options:[
        {text:'–ê–∫—Ç–∏–≤–Ω—ã–π –≤–µ—Å—å –¥–µ–Ω—å',value:0},
        {text:'–°–∏–¥—è—á–∞—è —Ä–∞–±–æ—Ç–∞ + –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å',value:1},
        {text:'–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —Å–∏–¥—è—á–∏–π',value:2}
      ]},
      { type:'radio', name:'sport', question:'4. –§–∏–∑–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å', options:[
        {text:'3+ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏/–Ω–µ–¥',value:0},
        {text:'1‚Äì2 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏/–Ω–µ–¥',value:1},
        {text:'–ù–∏–∫–∞–∫–∏—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫',value:2}
      ]},
      { type:'radio', name:'cycle', question:'5. –î–µ–Ω—å —Ü–∏–∫–ª–∞', options:[
        {text:'5‚Äì14 (—Ñ–æ–ª–ª–∏–∫—É–ª—è—Ä–Ω–∞—è)',value:0},
        {text:'15‚Äì28 (–ª—é—Ç–µ–∏–Ω–æ–≤–∞—è)',value:2},
        {text:'1‚Äì4 –∏–ª–∏ –Ω–µ—Ç —Ü–∏–∫–ª–∞',value:1}
      ]},
      { type:'radio', name:'disease', question:'6. –•—Ä–æ–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è', options:[
        {text:'–ù–µ—Ç',value:0},
        {text:'–ï—Å—Ç—å, –±–µ–∑ —Å–∏–º–ø—Ç–æ–º–æ–≤',value:2},
        {text:'–ï—Å—Ç—å, —Å —Å–∏–º–ø—Ç–æ–º–∞–º–∏',value:3}
      ]},
      { type:'radio', name:'meds', question:'7. –ü—Ä–∏—ë–º –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤', options:[
        {text:'–ù–µ—Ç',value:0},
        {text:'–ò–Ω–æ–≥–¥–∞',value:1},
        {text:'–†–µ–≥—É–ª—è—Ä–Ω–æ',value:2}
      ]},
      { type:'radio', name:'swelling', question:'8. –û—Ç–µ–∫–∏', options:[
        {text:'–ù–µ—Ç',value:0},
        {text:'–ò–Ω–æ–≥–¥–∞',value:1},
        {text:'–ß–∞—Å—Ç–æ',value:2}
      ]}
    ];

    let answers = {}, current = 0, total = slides.length - 1;
    const slideEl    = document.getElementById('slide');
    const progressEl = document.getElementById('progressBar');
    const quizSec    = document.getElementById('quizSection');
    const welcome    = document.getElementById('welcome');
    const startBtn   = document.getElementById('startBtn');

    startBtn.onclick = () => {
      welcome.style.display = 'none';
      quizSec.style.display  = 'block';
      render();
    };

    function updateProgress(){
      progressEl.style.width = (current/total)*100 + '%';
    }
    function pop(){
      slideEl.classList.add('pop');
      setTimeout(()=>slideEl.classList.remove('pop'),200);
    }

    function render(){
      updateProgress();
      slideEl.innerHTML = '';
      if(current>total) return showResult();

      const s = slides[current];
      const wrp = document.createElement('div');
      wrp.className = 'slide';
      wrp.innerHTML = `<h2>${s.question}</h2>`;

      if(s.type==='radio'){
        const opts = document.createElement('div');
        opts.className = 'options';
        s.options.forEach(o=>{
          const lbl = document.createElement('label');
          lbl.innerHTML = `<input type="radio" name="${s.name}" value="${o.value}"> ${o.text}`;
          opts.append(lbl);
        });
        wrp.append(opts);

        const btn = document.createElement('button');
        btn.textContent = current<total?'–î–∞–ª–µ–µ':'–ó–∞–≤–µ—Ä—à–∏—Ç—å';
        btn.disabled = true;
        wrp.append(btn);

        opts.addEventListener('input',()=>{
          btn.disabled = !opts.querySelector('input:checked');
        });
        btn.onclick = ()=>{
          answers[s.name] = +opts.querySelector('input:checked').value;
          current++; pop(); render();
        };

      } else if(s.type==='bmi'){
        const flex = document.createElement('div');
        flex.className = 'fields';
        flex.innerHTML = `
          <input id="weight" type="number" placeholder="–í–µ—Å (–∫–≥)">
          <input id="height" type="number" placeholder="–†–æ—Å—Ç (—Å–º)">
        `;
        wrp.append(flex);

        const bmiDisplay = document.createElement('div');
        bmiDisplay.id = 'bmiValue';
        wrp.append(bmiDisplay);

        const btn = document.createElement('button');
        btn.textContent = '–î–∞–ª–µ–µ';
        btn.disabled = true;
        wrp.append(btn);

        flex.addEventListener('input',()=>{
          const w = parseFloat(flex.querySelector('#weight').value),
                h = parseFloat(flex.querySelector('#height').value);
          if(w>0&&h>0){
            const bmi = w/((h/100)*(h/100));
            bmiDisplay.textContent = `–í–∞—à –ò–ú–¢: ${bmi.toFixed(1)}`;
            btn.disabled = false;
          } else {
            bmiDisplay.textContent = '';
            btn.disabled = true;
          }
        });

        btn.onclick = ()=>{
          const w = +flex.querySelector('#weight').value,
                h = +flex.querySelector('#height').value/100,
                bmi = w/(h*h);
          answers.bmi = bmi>30?3:bmi>25?2:bmi>22?1:0;
          current++; pop(); render();
        };
      }

      slideEl.append(wrp);
    }

    function showResult(){
      updateProgress();
      slideEl.innerHTML = '';
      const sum = Object.values(answers).reduce((a,b)=>a+b,0);
      const box = document.createElement('div');
      box.className = 'slide result';

      if(sum<=6){
        box.innerHTML=`
          <img src="low.jpg" alt="">
          <h2>–ü—Ä–æ—Å—Ç–æ –≤–æ—Å—Ö–∏—Ç–∏—Ç–µ–ª—å–Ω–æ! ü•≥</h2>
          <p>–£ –≤–∞—Å –Ω–∏–∑–∫–∞—è —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ –æ—Ç—ë–∫–∞–º. üî•</p>
          <ul>
            <li>üî∏ –ò–∑–±–µ–≥–∞–π—Ç–µ –ª–∏—à–Ω–µ–π —Å–æ–ª–∏</li>
            <li>üî∏ –®–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</li>
          </ul>
          <a href="https://my.walk-walk.ru/" class="btn-link">–ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º</a>
        `;
      } else if(sum<=13){
        box.innerHTML=`
          <img src="medium.jpg" alt="">
          <h2>–£–º–µ—Ä–µ–Ω–Ω–∞—è —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å ü§ó</h2>
          <p>–û—Ç–µ–∫–∏ –º–æ–≥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –Ω–∞ —Ñ–æ–Ω–µ —Ü–∏–∫–ª–∞, –ø–∏—Ç–∞–Ω–∏—è –∏–ª–∏ –º–∞–ª–æ–ø–æ–¥–≤–∏–∂–Ω–æ—Å—Ç–∏.</p>
          <ul>
            <li>üî∏ –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ –Ω–∞—Ç—Ä–∏–π</li>
            <li>üî∏ –õ–∏–º—Ñ–æ–¥—Ä–µ–Ω–∞–∂</li>
          </ul>
          <a href="https://my.walk-walk.ru/" class="btn-link">–ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º</a>
        `;
      } else {
        box.innerHTML=`
          <img src="high.jpg" alt="">
          <h2>–í—ã—Å–æ–∫–∞—è —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å üòî</h2>
          <p>–û—Ç–µ–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —á–∞—Å—Ç—ã–º–∏ ‚Äî –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É.</p>
          <ul>
            <li>üî∏ –ö–∞—Ä–¥–∏–æ–ª–æ–≥, —ç–Ω–¥–æ–∫—Ä–∏–Ω–æ–ª–æ–≥</li>
            <li>üî∏ –ö–æ–Ω—Ç—Ä–æ–ª—å —Å–æ–ª–∏</li>
          </ul>
          <a href="https://my.walk-walk.ru/" class="btn-link">–ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º</a>
        `;
      }

      slideEl.append(box);

      setTimeout(()=>{
        if(sum<=6){
          confetti({ particleCount:200, spread:100, colors:['#FFCD00','#00D100','#0096FF','#FF007F'] });
        } else if(sum<=13){
          confetti({ particleCount:100, spread:60, gravity:0.3, colors:['#FFD700'] });
        } else {
          for(let i=0;i<12;i++){
            const h = document.createElement('div');
            h.className = 'heart';
            h.textContent = '‚ù§Ô∏è';
            h.style.left = (10+Math.random()*80)+'%';
            document.body.append(h);
            setTimeout(()=>h.remove(),3000);
          }
        }
      },200);
    }

    // —Å—Ç–∞—Ä—Ç
    render();
  </script>
</body>
</html>
