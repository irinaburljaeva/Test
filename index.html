<!DOCTYPE html><html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Интерактивный опрос по отекам</title>
  <!-- Canvas Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <style>
    body {
      margin: 0;
      padding: 2rem;
      background: #f0f4f8;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      color: #333;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    h1 {
      text-align: center;
      background: #e85d04;
      color: #fff;
      margin: 0;
      padding: 1rem;
      font-size: 1.5rem;
    }
    .progress {
      height: 8px;
      background: #ddd;
    }
    .progress-bar {
      height: 100%;
      width: 0;
      background: #e85d04;
      transition: width 0.3s;
    }
    .slide {
      padding: 2rem;
    }
    .slide h2 {
      margin-top: 0;
      font-size: 1.25rem;
    }
    .options {
      margin: 1rem 0;
    }
    .options label {
      display: block;
      margin-bottom: 0.75rem;
      cursor: pointer;
    }
    .options input {
      margin-right: 0.5rem;
    }
    .fields {
      display: flex;
      gap: 1rem;
      margin: 1rem 0;
    }
    .fields label {
      flex: 1;
    }
    .fields input {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      display: block;
      width: 100%;
      padding: 0.75rem;
      font-size: 1rem;
      background: #e85d04;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:disabled {
      background: #f5a46b;
      cursor: not-allowed;
    }
    .result {
      padding: 2rem;
      text-align: center;
    }
    .result h2 {
      margin-top: 0;
    }
    .result p {
      margin: 1rem 0;
      line-height: 1.5;
    }
    .btn-link {
      display: inline-block;
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      background: #007bff;
      color: #fff;
      text-decoration: none;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Оценка склонности к отекам</h1>
    <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
    <div id="slideContainer"></div>
  </div>  <script>
    const slides = [
      { type: 'radio', name: 'age', question: '1. Возраст', options: [
        {text: 'До 25 лет', value: 0},
        {text: '26–35 лет', value: 1},
        {text: '36–45 лет', value: 2},
        {text: 'Старше 45', value: 3}
      ]},
      { type: 'bmi', name: 'bmi', question: '2. Введите ваш вес и рост'},
      { type: 'radio', name: 'life', question: '3. Образ жизни', options: [
        {text: 'Активный весь день', value:0},
        {text: 'Сидячая работа + активность', value:1},
        {text: 'Преимущественно сидячий', value:2}
      ]},
      { type: 'radio', name: 'sport', question: '4. Физическая активность', options: [
        {text: '3+ тренировки/нед', value:0},
        {text: '1–2 тренировки/нед', value:1},
        {text: 'Никаких тренировок', value:2}
      ]},
      { type: 'radio', name: 'cycle', question: '5. День цикла', options: [
        {text: '5–14 (фолликулярная фаза)', value:0},
        {text: '15–28 (лютеиновая фаза)', value:2},
        {text: '1–4 или нет цикла', value:1}
      ]},
      { type: 'radio', name: 'disease', question: '6. Хронические заболевания', options: [
        {text: 'Нет', value:0},
        {text: 'Есть, но без симптомов', value:2},
        {text: 'Есть, с симптомами', value:3}
      ]},
      { type: 'radio', name: 'meds', question: '7. Прием препаратов', options: [
        {text: 'Нет', value:0},
        {text: 'Иногда', value:1},
        {text: 'Регулярно', value:2}
      ]},
      { type: 'radio', name: 'swelling', question: '8. Замечаете отеки?', options: [
        {text: 'Нет', value:0},
        {text: 'Иногда', value:1},
        {text: 'Часто', value:2}
      ]}
    ];

    const answers = {};
    let current = 0;
    const total = slides.length;

    const slideContainer = document.getElementById('slideContainer');
    const progressBar = document.getElementById('progressBar');

    function updateProgress() {
      const pct = (current / total) * 100;
      progressBar.style.width = pct + '%';
    }

    function renderSlide() {
      updateProgress();
      slideContainer.innerHTML = '';
      if (current < total) {
        const slide = slides[current];
        const el = document.createElement('div'); el.className = 'slide';
        const q = document.createElement('h2'); q.textContent = slide.question; el.append(q);
        if (slide.type === 'radio') {
          const opts = document.createElement('div'); opts.className = 'options';
          slide.options.forEach(o => {
            const lbl = document.createElement('label');
            lbl.innerHTML = `<input type="radio" name="${slide.name}" value="${o.value}"> ${o.text}`;
            opts.append(lbl);
          });
          el.append(opts);
        } else if (slide.type === 'bmi') {
          const flex = document.createElement('div'); flex.className = 'fields';
          flex.innerHTML =
            `<label>Вес (кг):<input type="number" id="weight" min="30" max="200"></label>`+
            `<label>Рост (см):<input type="number" id="height" min="100" max="250"></label>`;
          el.append(flex);
        }
        const btn = document.createElement('button'); btn.textContent = current < total-1 ? 'Далее' : 'Завершить';
        btn.disabled = true;
        el.append(btn);
        slideContainer.append(el);

        // enable button
        el.addEventListener('input', () => {
          if (slide.type === 'radio') {
            btn.disabled = !el.querySelector(`input[name="${slide.name}"]:checked`);
          } else {
            const w = el.querySelector('#weight').value;
            const h = el.querySelector('#height').value;
            btn.disabled = !(w && h);
          }
        });

        btn.addEventListener('click', () => {
          // save answer
          if (slide.type === 'radio') {
            answers[slide.name] = +el.querySelector(`input[name="${slide.name}"]:checked`).value;
          } else {
            const w = +el.querySelector('#weight').value;
            const hcm = +el.querySelector('#height').value;
            const bmi = w / ((hcm/100)**2);
            if (bmi > 30) answers.bmi = 3;
            else if (bmi > 25) answers.bmi = 2;
            else if (bmi > 22) answers.bmi = 1;
            else answers.bmi = 0;
          }
          // confetti
          confetti({ particleCount: 80, spread: 60 });
          current++;
          if (current < total) renderSlide();
          else showResult();
        });
      }
    }

    function showResult() {
      updateProgress();
      slideContainer.innerHTML = '<div class="result" id="resultBox"></div>';
      const score = Object.values(answers).reduce((a,b)=>a+b,0);
      let title, text;
      if (score <= 6) {
        title = 'Без склонности к отекам';
        text = 'Отеки маловероятны или кратковременны. Поддерживайте активность и водный баланс, избегайте избытка соли.';
      } else if (score <= 13) {
        title = 'Умеренная склонность к отекам';
        text = 'Отеки могут появляться при цикле, питании или малоподвижности. Следите за натрием, добавьте движение и лимфодренаж.';
      } else {
        title = 'Высокая склонность к отекам';
        text = 'Частые отеки могут сигнализировать о системных нарушениях. Обратитесь к врачу, контролируйте соль и активность.';
      }
      document.getElementById('resultBox').innerHTML =
        `<h2>${title}</h2><p>${text}</p>`+
        `<a href="https://my.walk-walk.ru/" class="btn-link">Перейти к анти-отечной программе</a>`;
      confetti({ particleCount: 150, spread: 80, origin: { y: 0.4 } });
    }

    renderSlide();
  </script></body>
</html>        <div class="flex">
          <label>Вес (кг):<input type="number" id="weight" min="30" max="200" required></label>
          <label>Рост (см):<input type="number" id="height" min="100" max="250" required></label>
        </div>
        <small>ИМТ = вес ÷ (рост м)²</small>
      </fieldset>
      <fieldset>
        <legend>3. Образ жизни</legend>
        <label><input type="radio" name="life" value="0" required>Активный, весь день на ногах</label>
        <label><input type="radio" name="life" value="1">Сидячая работа, но есть активность</label>
        <label><input type="radio" name="life" value="2">Преимущественно сидячий</label>
      </fieldset>
      <fieldset>
        <legend>4. Физическая активность</legend>
        <label><input type="radio" name="sport" value="0" required>3+ тренировки/нед</label>
        <label><input type="radio" name="sport" value="1">1–2 тренировки/нед</label>
        <label><input type="radio" name="sport" value="2">Никаких тренировок</label>
      </fieldset>
      <fieldset>
        <legend>5. День цикла</legend>
        <label><input type="radio" name="cycle" value="0" required>5–14 день</label>
        <label><input type="radio" name="cycle" value="2">15–28 день</label>
        <label><input type="radio" name="cycle" value="1">1–4 день или нет цикла</label>
      </fieldset>
      <fieldset>
        <legend>6. Хронические заболевания</legend>
        <label><input type="radio" name="disease" value="0" required>Нет</label>
        <label><input type="radio" name="disease" value="2">Есть, но без симптомов</label>
        <label><input type="radio" name="disease" value="3">Есть с симптомами</label>
      </fieldset>
      <fieldset>
        <legend>7. Прием препаратов</legend>
        <label><input type="radio" name="meds" value="0" required>Нет</label>
        <label><input type="radio" name="meds" value="1">Иногда</label>
        <label><input type="radio" name="meds" value="2">Регулярно</label>
      </fieldset>
      <fieldset>
        <legend>8. Отеки</legend>
        <label><input type="radio" name="swelling" value="0" required>Нет</label>
        <label><input type="radio" name="swelling" value="1">Иногда</label>
        <label><input type="radio" name="swelling" value="2">Часто</label>
      </fieldset>
      <button type="submit">Узнать результат</button>
    </form>
    <div id="result" class="result"></div>
  </div>
  <script>
    document.getElementById('quiz').addEventListener('submit', function(e) {
      e.preventDefault();
      let score = 0;
      const form = e.target;
      ['age','life','sport','cycle','disease','meds','swelling'].forEach(key => {
        score += +form.elements[key].value;
      });
      const w = +document.getElementById('weight').value;
      const h = +document.getElementById('height').value/100;
      const bmi = w/(h*h);
      score += bmi>30?3:bmi>25?2:bmi>22?1:0;
      let title, text, cls;
      if(score<=6) {
        title = 'Без склонности к отекам';
        text = 'Отеки маловероятны или кратковременны.<br>Рекомендации:<br>• Поддерживайте активность и водный баланс<br>• Избегайте резкого повышения натрия';
        cls='low';
      } else if(score<=13) {
        title='Средняя склонность к отекам';
        text='Отеки могут появляться при цикле, питании или малоподвижности.<br>Рекомендации:<br>• Следите за натрием<br>• Используйте лимфодренажные средства<br>• Введите дневник веса и жидкости<br>• Больше движения, отдых и сон';
        cls='moderate';
      } else {
        title='Сильно склонны к отекам';
        text='Частые отеки могут сигнализировать о нарушениях.<br>Рекомендации:<br>• Обратитесь к врачу<br>• Контроль соли и жидкости<br>• Возможен прием диуретиков (по назначению)<br>• Ведение дневника симптомов';
        cls='high';
      }
      const res = document.getElementById('result');
      res.className='result '+cls;
      res.innerHTML=`<h2>${title}</h2><p>${text}</p><a href='https://my.walk-walk.ru/' class='btn-link'>К анти-отечной программе</a>`;
      res.scrollIntoView({behavior:'smooth'});
    });
  </script>
</body>
        </html>
